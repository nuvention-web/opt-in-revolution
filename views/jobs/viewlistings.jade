extends ../layout

block content
	.tile-job
		.container
			.row.mt.centered
				.col-lg-12
					.job-header
						big
							h1 My Listings
	if joblist.length==0
		.container
			.job-listing-wrapper
				.row.mt
						h4 You haven't posted any jobs yet!
	else
		.container
			.job-listing-wrapper
				each job, i in joblist
					.row.mt
						.job-card
							.row.mt.job-card-heading
								.col-md-12
									h4 
										| #{job.jobName} - #{job.companyName}
							.row.mt.job-card-description
								h5 Description
								.col-md-12
									| #{job.jobDescription}
							.row.mt.job-card-other
								h5 Details
								.col-md-6
									b Industry: 
									| #{job.industry}
									br
									b Job Function: 
									| #{job.jobFunction}
									br
									b Skills Needed: 
									| #{job.skillsNeeded}
									br
									b Contact Method: 
									| #{job.primaryComm}
								.col-md-6
									b Project Length: 
									| #{job.totalWeeks}
									br
									b Hours per week: 
									| #{job.hoursPerWeek}
									br
									b Check-in Frequency: 
									| #{job.checkinFrequency}
									br
									b Pay: 
									| #{job.pay}
							.row.mt.job-card-buttons
								.col-md-2.col-md-offset-10
									a.btn.btn-success.btn-md.job-btn(href='/job/update-#{job.id}', role='button') Update
									a.btn.btn-success.btn-md.job-btn(href='/job/delete-#{job.id}', role='button') Delete
							-var counter = 0;
							-var appJobMatchArr = [];
								each app in jobAppArr
									if app.jobID==job.id
										-appJobMatchArr.push(app);
										-counter = counter + 1;
								div(id="accordion_#{i}", class="panel-group")
									.panel.panel-default
										.panel-heading
											h4.panel-title
												if counter >= 2
													a(data-toggle='collapse', data-parent='#accordion_#{i}', href='#collapse_#{i}') See #{counter} applications
												else if counter == 1
													a(data-toggle='collapse', data-parent='#accordion_#{i}', href='#collapse_#{i}') See #{counter} application
												else
													| No applications yet!
											div(id="collapse_#{i}", class="panel-collapse collapse")
												.panel-body
													each application in appJobMatchArr
														div
															a(href='/job/viewapplication-#{application.id}', role='button') #{application.user.profile.name} application